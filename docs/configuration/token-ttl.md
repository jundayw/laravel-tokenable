---
title: 令牌生命周期
lang: zh-CN
---

# 令牌生命周期

```php
/*
|--------------------------------------------------------------------------------------
| 访问令牌有效期 (TTL)
|--------------------------------------------------------------------------------------
|
| 此值定义已颁发的访问令牌在过期前保持有效的秒数。
| 过期后，令牌将无法再
| 用于访问受保护的资源。
|
*/

'ttl' => env('TOKEN_TTL', 7200),

/*
|-----------------------------------------------------------------------------------
| 刷新令牌不早于时间
|-----------------------------------------------------------------------------------
|
| 此值定义颁发后，刷新令牌在多少秒内无法使用。
| 这允许强制执行最短等待时间。
| 客户端可以使用刷新令牌请求新的访问令牌。
|
*/

'refresh_nbf' => env('TOKEN_REFRESH_NBF', 3600),

/*
|--------------------------------------------------------------------------
| 刷新令牌有效期
|---------------------------------------------------------------------------
|
| 此值控制刷新令牌的总有效期。它可以
| 表示为相对间隔（例如，“P15D”表示 15 天）。一旦
| 刷新令牌过期，客户端必须重新进行身份验证才能获取
| 新令牌。
|
*/

'refresh_ttl' => env('TOKEN_REFRESH_TTL', 'P15D'),

/*
|---------------------------------------------------------------------------
| 授权码有效期
|---------------------------------------------------------------------------------------
|
| 此值定义授权码的有效期。由于这些
|由于授权码的有效期较短，因此可以快速交换访问
| 令牌，其有效期应非常短（通常为 30-300
| 秒）。授权码过期后，客户端必须重新启动
| 授权流程才能获取新的授权码。
|
*/

'auth_code_ttl' => env('TOKEN_AUTH_CODE_TTL', 60),
```

- `ttl`: 访问令牌有效期（单位：秒）：过期后，令牌将无法再用于访问受保护的资源。
- `refresh_nbf`: 刷新令牌生效时间（单位：秒）：此值定义刷新令牌签发后多少秒内不能使用，这允许强制执行最短等待时间，客户端才可以使用刷新令牌请求新的访问令牌。
- `refresh_ttl`: 刷新令牌有效期（单位：ISO8601）：刷新令牌过期后，客户端必须重新进行身份验证才能获取新令牌。
- `auth_code_ttl`: 授权码有效期（单位：秒）：授权码过期后，客户端必须重新启动授权流程以获取新的授权码。
